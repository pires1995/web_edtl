{% extends 'web_admin/layout.html' %}
{% load static %}
{% block title %}
{{title}}
{% endblock title %}
{% block content %}

<div class="pagetitle text-center">
  {% if group == 'admin' or group == 'coordinator' or group == 'admin' %}
  <h1 class="p-3">Welcome to EDTL, EP Website Admin Dashboard</h1>
  {% elif group == 'secretary' %}
  <h1 class="p-3">Welcome to EDTL, EP Appointment Dashboard</h1>
  {% elif group == 'finance' %}
  <h1 class="p-3">Welcome to EDTL, EP Bill Management Dashboard</h1>
  {% endif %}
    <!-- <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item active">Dashboard</li>
        </ol>
    </nav> -->
</div><!-- End Page Title -->

<section class="section dashboard">
  {% if group == 'admin' or group == 'coordinator' or group == 'media' %}
    
  
    <div class="row">
        <div class="col-md-4">
                <div class="card info-card sales-card">
  
                  <div class="card-body">
                    <h5 class="card-title">Subscribe Users</h5>
  
                    <div class="d-flex align-items-center">
                      <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                        <i class="bi bi-people"></i>
                      </div>
                      <div class="ps-3">
                        <h6>{{subusers}}</h6>
  
                      </div>
                    </div>
                  </div>
              </div><!-- End Sales Card -->
        </div>
        <div class="col-md-4">
            <div class="card info-card customers-card">

                <div class="card-body">
                  <h5 class="card-title">Appointments</h5>

                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-people"></i>
                    </div>
                    <div class="ps-3">
                      <h6>{{appointment}}</h6>

                    </div>
                  </div>

                </div>
              </div>
        </div>
        <div class="col-md-4">
            <div class="card info-card revenue-card">

                <div class="card-body">
                  <h5 class="card-title">Active Users (FMS)</h5>

                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-person-plus"></i>
                    </div>
                    <div class="ps-3">
                      <h6>{{client}}</h6>
                    </div>
                  </div>
                </div>

              </div>
        </div>
    </div>
    <div class="row">

        <!-- Left side columns -->
        <div class="col-lg-8">
            <div class="row">
                <div id="news_bar"></div>
            </div>
        </div><!-- End Left side columns -->

        <!-- Right side columns -->
        <div class="col-lg-4">

            <div class="row">

            </div>

        </div><!-- End Right side columns -->

    </div>
    {% elif group == 'secretary' %}
    <div class="row">
      <div class="col-md-4">
              <div class="card info-card sales-card">

                <div class="card-body">
                  <h5 class="card-title">Appointment Approved</h5>

                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-people"></i>
                    </div>
                    <div class="ps-3">
                      <h6>{{appointment_approved}}</h6>

                    </div>
                  </div>
                </div>
            </div><!-- End Sales Card -->
      </div>
      <div class="col-md-4">
          <div class="card info-card customers-card">

              <div class="card-body">
                <h5 class="card-title">Appointment Done</h5>

                <div class="d-flex align-items-center">
                  <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                    <i class="bi bi-people"></i>
                  </div>
                  <div class="ps-3">
                    <h6>{{appointment_done}}</h6>

                  </div>
                </div>

              </div>
            </div>
      </div>
      <div class="col-md-4">
          <div class="card info-card revenue-card">

              <div class="card-body">
                <h5 class="card-title">Incoming Appointment </h5>

                <div class="d-flex align-items-center">
                  <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                    <i class="bi bi-person-plus"></i>
                  </div>
                  <div class="ps-3">
                    <h6>{{appointment_incomming}}</h6>
                  </div>
                </div>
              </div>

            </div>
      </div>
    </div>
    {% elif group == 'finance' %}
    <div class="row">
      <div class="col-md-4">
              <div class="card info-card sales-card">

                <div class="card-body">
                  <h5 class="card-title">Incoming Bill</h5>

                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-arrow-down-square"></i>
                    </div>
                    <div class="ps-3">
                      <h6>{{bill_incoming}}</h6>

                    </div>
                  </div>
                </div>
            </div><!-- End Sales Card -->
      </div>
      <div class="col-md-4">
          <div class="card info-card customers-card">

              <div class="card-body">
                <h5 class="card-title">Approved Bill</h5>

                <div class="d-flex align-items-center">
                  <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                    <i class="bi bi-clipboard-check"></i>
                  </div>
                  <div class="ps-3">
                    <h6>{{bill_done}}</h6>

                  </div>
                </div>

              </div>
            </div>
      </div>
      <div class="col-md-4">
          <div class="card info-card revenue-card">

              <div class="card-body">
                <h5 class="card-title">Client</h5>

                <div class="d-flex align-items-center">
                  <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                    <i class="bi bi-people"></i>
                  </div>
                  <div class="ps-3">
                    <h6>{{clients}}</h6>
                  </div>
                </div>
              </div>

            </div>
      </div>
    </div>
    {% endif %}
</section>
{% endblock content %}
{% block scripts %}
<script src="{% static 'web_admin/js/code/highcharts.js' %}"></script>
<script>
    Highcharts.chart('news_bar', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'News Approved'
        },
        xAxis: {
            categories: [
                {% for entry in news %}
                   '{{entry.news_category__name}}' {% if not forloop.last %}, 
                   {% endif %}
                {% endfor %}
            ]
        },
        series: [
        {
            grouping: false,
            name: 'Geral',
            data: [
                {% for entry in news %}
                {{ entry.geral_count }} {% if not forloop.last %}, {% endif %}
                {% endfor %}
            ]
        }, 
        {
            grouping: false,
            name: 'Projetu',
            data: [
                {% for entry in news %}
                {{ entry.project_count }} {% if not forloop.last %}, {% endif %}
                {% endfor %}
            ],
            color: 'crimson'
        }]
    });
</script>
{% endblock scripts %}